# DPFPSI协议执行流程

## 完整执行步骤

### 步骤1: 运行ss3r.py生成Q文件
```bash
cd /home/hmj/MFCPIR/DPFPSI-main/DPFPSI
python3 ss3r.py
```
- 在交互界面中设置匹配条件
- 选择保存Q集合到文件
- 系统会生成 `Q_result_YYYYMMDD_HHMMSS.txt` 文件

### 步骤2: 运行三方协议
```bash
cd /home/hmj/MFCPIR/DPFPSI-main/DPFPSI
./run_after_ss3r.sh
```

脚本会自动：
1. ✓ 查找最新的Q文件（`Q_result_*.txt`）
2. ✓ 启动AidServer（辅助DPF协议）
3. ✓ 启动Server（生成数据和label）
4. ✓ 启动Client（使用Q文件进行查询）
5. ✓ 等待协议完成
6. ✓ 显示结果统计

## 输出文件

- `cli/client_result.txt` - Client查询结果（包含通信消耗）
- `cli/server_data.txt` - Server生成的数据
- `cli/time.txt` - 性能统计（包含通信消耗）

## 注意事项

- 必须**先运行**`ss3r.py`生成Q文件，否则脚本会报错退出
- 如果Q文件不存在，脚本会提示："请先手动执行ss3r.py生成Q文件"
- 每次运行前会自动清理旧的输出文件
- 脚本会自动找到最新的Q文件（按时间戳排序）

